{"version":3,"file":"ProductInfo.js","sources":["../src/products.js","../src/index.js"],"sourcesContent":["export default [\n  {\n    ids: [\n      '2.02.09.04.01.01.01'\n    ],\n    name: 'Programa de Gerenciamento de Riscos (PGR) - NR 01',\n    abbr: 'PGR NR 01',\n    category: 'PPRA'\n  },\n  {\n    ids: [\n      '2.02.01.01.03.001.001',\n      '2.02.09.03.01.01.02'\n    ],\n    name: 'Programa de Preven√ß√£o de Riscos Ambientais (PPRA) - NR 09',\n    abbr: 'PPRA NR 09',\n    category: 'PPRA'\n  },\n  {\n    ids: [\n      '2.02.01.01.06.002.001',\n      '2.02.09.03.01.01.09'\n    ],\n    name: 'Programa de Gerenciamento de Riscos na Minera√ß√£o (PGR) - NR 22',\n    abbr: 'PGR NR 22',\n    category: 'PPRA'\n  },\n  {\n    ids: [\n      '2.02.01.01.02.003.001',\n      '2.02.09.03.01.01.10'\n    ],\n    name: 'Programa de Condi√ß√µes de Meio Ambiente de Trabalho na Ind√∫stria da Constru√ß√£o (PCMAT) - NR 18',\n    abbr: 'PCMAT NR 18',\n    category: 'PPRA'\n  },\n  {\n    ids: [\n      '2.02.01.01.06.003.005',\n      '2.02.09.03.01.01.11'\n    ],\n    name: 'Programa de Gerenciamento de Riscos no Trabalho Rural (PGRTR) - NR 31',\n    abbr: 'PGRTR NR 31',\n    category: 'PPRA'\n  },\n  {\n    ids: [\n      '2.02.01.01.03.002.008',\n      '2.02.09.03.01.02.01'\n    ],\n    name: 'Avalia√ß√£o ambiental - agentes f√≠sicos',\n    abbr: 'Agente F√≠sico',\n    category: 'Higiene Ocupacional'\n  },\n  {\n    ids: [\n      '2.02.01.01.03.002.009',\n      '2.02.09.03.01.02.02'\n    ],\n    name: 'Avalia√ß√£o ambiental - agentes qu√≠micos',\n    abbr: 'Agente Qu√≠mico',\n    category: 'Higiene Ocupacional'\n  },\n  {\n    ids: [\n      '2.02.01.01.07.001.004',\n      '2.02.09.03.01.02.03'\n    ],\n    name: 'Laudos (LTCAT / Insalubridade / Periculosidade)',\n    abbr: 'Laudos',\n    category: 'Higiene Ocupacional'\n  },\n  {\n    ids: [\n      '2.02.01.01.05.003.001',\n      '2.02.09.03.01.03.03'\n    ],\n    name: 'AET - An√°lise ergon√¥mica do trabalho (NR 17)',\n    abbr: 'AET NR 17',\n    category: 'Ergonomia'\n  },\n  {\n    ids: [\n      '2.02.09.03.01.03.04'\n    ],\n    name: 'Laudo de ilumin√¢ncia (NHO 11)',\n    abbr: 'Ilumin√¢ncia NHO 11',\n    category: 'Ergonomia'\n  },\n  {\n    ids: [\n      '2.02.01.01.05.002.002',\n      '2.02.09.05.01.03.01'\n    ],\n    name: 'Consultoria em Ergonomia',\n    abbr: 'Consultoria',\n    category: 'Ergonomia'\n  },\n  {\n    ids: [\n      '2.02.01.01.08.001.001',\n      '2.02.09.03.01.01.03'\n    ],\n    name: 'Programa de Controle M√©dico de Sa√∫de Ocupacional (PCMSO) - NR 07',\n    abbr: 'PCMSO NR 07',\n    category: 'PCMSO'\n  },\n  {\n    ids: [\n      '2.02.01.01.08.001.006',\n      '2.02.09.03.01.01.04'\n    ],\n    name: 'Programa de Controle M√©dico de Sa√∫de Ocupacional (PCMSO) sem Coordena√ß√£o M√©dica- NR 07',\n    abbr: 'PCMSO NR 07 - Sem Coordena√ß√£o M√©dica',\n    category: 'PCMSO'\n  },\n  {\n    ids: [\n      '2.02.01.01.08.001.004',\n      '2.02.09.03.01.01.05'\n    ],\n    name: 'Relat√≥rio Anual do Programa de Controle M√©dico de Sa√∫de Ocupacional (PCMSO)',\n    abbr: 'Relat√≥rio Anual PCMSO',\n    category: 'Atendimento InCompany'\n  },\n  {\n    ids: [\n      '2.02.01.01.09.001.001',\n      '2.02.09.03.01.01.12'\n    ],\n    name: 'Consultas e Exames Ocupacionais',\n    abbr: 'Consultas e Exames Ocup.',\n    category: 'Atendimento InCompany'\n  },\n  {\n    ids: [\n      '2.02.01.01.10.001.001'\n    ],\n    name: 'Consultas e Exames Ocupacionais',\n    abbr: 'Consultas e Exames Ocup. Desativ',\n    category: 'Atendimento InCompany'\n  }\n]\n","import products from './products'\n\nconst ORIGINAL_PRODUCT_LENGTH = 15\nconst ORIGINAL_PRODUCT_REGEX =\n  /\\d{1}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{3}\\.\\d{3}/\n\nconst NEW_PRODUCT_LENGTH = 13\nconst NEW_PRODUCT_REGEX =\n  /\\d{1}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d{2}/\n\n/**\n * üîë M√©todos P√∫blicos\n */\n\n/**\n * @typedef {\"PPRA\" | \"Higiene Ocupacional\" | \"Ergonomia\" | \"PCMSO\" | \"Atendimento InCompany\"} ProductCategory\n *\n * @typedef {String[]} ProductIds\n *\n * @typedef {Object} Product\n * @property {ProductIds} ids - Lista de c√≥digos de um determinado produto\n * @property {String} name - Nome completo do produto\n * @property {String} abbr - Nome abreviado do produto\n * @property {ProductCategory} category - Categoria do produto\n */\n\n/**\n * @public\n * @param {String} id - c√≥digo do produto no CRM\n * @return {Product} informa√ß√µes do produto\n */\nexport const getProduct = id =>\n  findProduct(id)\n\n/**\n * @public\n * @param {String} id - c√≥digo do produto no CRM\n * @return {String} nome completo do produto\n */\nexport const getName = id =>\n  findProduct(id).name\n\n/**\n * @public\n * @param {String} id - c√≥digo do produto no CRM\n * @return {String} nome abreviado do produto\n */\nexport const getAbbr = id =>\n  findProduct(id).abbr\n\n/**\n * @public\n * @param {String} id - c√≥digo do produto no CRM\n * @return {String} categoria do produto\n */\nexport const getCategory = id =>\n  findProduct(id).category\n\n/**\n * @public\n * @param {String} id - c√≥digo do produto no CRM\n * @return {Boolean} validade do c√≥digo de produto\n */\nexport const isValid = id => {\n  const stripped = strip(id)\n\n  const validPattern =\n    ORIGINAL_PRODUCT_REGEX.test(id) ||\n    NEW_PRODUCT_REGEX.test(id)\n\n  const validLength =\n    stripped.length === ORIGINAL_PRODUCT_LENGTH ||\n    stripped.length === NEW_PRODUCT_LENGTH\n\n  return validPattern && validLength\n}\n\n/**\n * @public\n * @param {String} id - c√≥digo do produto no CRM\n * @return {String} nome abreviado do produto\n */\nexport const strip = id =>\n  (id || '').toString().replace(/[^\\d]/g, '')\n\n/**\n * üîí M√©todos Privados\n */\n\n/**\n * @private\n * @param {String} id - c√≥digo do produto no CRM\n * @return {Product} informa√ß√µes do produto\n */\nfunction findProduct (id) {\n  if (!isValid(id)) {\n    return handleErrors(\n      'C√≥digo Inv√°lido. O c√≥digo deve respeitar os formatos: ' +\n      '0.00.00.00.00.000.000 ou 0.00.00.00.00.00.00. ' +\n      `O c√≥digo informado foi: ${id}`\n    )\n  }\n\n  const product = products.find(({ ids }) =>\n    ids.includes(id)\n  )\n\n  if (!product) {\n    return handleErrors(`C√≥digo n√£o identificado. C√≥digo: ${id}`)\n  }\n\n  return product\n}\n\nfunction handleErrors (message) {\n  const codflow = getElementValue('#inpCodFlow')\n  const codflowExecute = getElementValue('#inpCodFlowExecute')\n  const codflowExecuteTask = getElementValue('#inpCodFlowExecuteTask')\n\n  throw new ProductException({\n    message,\n    codflow,\n    codflowExecute,\n    codflowExecuteTask\n  })\n}\n\n/**\n * @private\n * @param {String} qs - selector query string\n * @returns {String|Null} element value\n */\nfunction getElementValue (qs) {\n  const element = document.querySelector(qs)\n\n  return element\n    ? element.value\n    : null\n}\n\n/**\n * @private\n */\nfunction ProductException ({ message, codflow, codflowExecute, codflowExecuteTask }) {\n  this.name = 'ProductInfo'\n  this.message = message\n  this.codflow = codflow\n  this.codflowExecute = codflowExecute\n  this.codflowExecuteTask = codflowExecuteTask\n}\n"],"names":[],"mappings":"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"}